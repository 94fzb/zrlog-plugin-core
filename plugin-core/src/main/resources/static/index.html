<!DOCTYPE html>
<html xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8"/>
    <title> 插件管理 </title>
    <link href="assets/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="assets/css/custom.min.css" rel="stylesheet"/>
    <link href="assets/css/custom.colorful.css" rel="stylesheet"/>
    <link rel="stylesheet" href="assets/css/font-awesome.min.css"/>

    <link rel="stylesheet" href="assets/css/jquery.gritter.css"/>
    <style>
        #load {
            width: 100%;
            height: 100%;
            position: fixed;
            z-index: 9999;
            background: url("assets/images/loading.gif") no-repeat center center;
            background-size: 200px 200px;

        }

        .modal-setting {
            width: 800px;
        }

        .page-header {
            margin: 0 0 20px;
        }

        [v-cloak] {
            display: none;
        }

    </style>

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/vue.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>

    <script src="assets/js/jquery.gritter.min.js"></script>
    <script src="assets/js/eModal.min.js"></script>
    <script src="assets/js/plugin.js"></script>
    <script>
        document.onreadystatechange = function () {
            var state = document.readyState;
            if (state === 'interactive') {
                document.getElementById('load').style.visibility = "hidden";
                document.getElementById('contents').style.visibility = "hidden";
                //页面1s没有加载出来才展示load图标
                setTimeout(function () {
                    if (document.readyState !== 'complete') {
                        document.getElementById('load').style.visibility = "visible";
                    }
                }, 1000);
            } else if (state === 'complete') {
                document.getElementById('interactive');
                document.getElementById('load').style.visibility = "hidden";
                document.getElementById('contents').style.visibility = "visible";
            }
        };
        $(function () {
            $("#settings-btn").click(function () {
                var options = {
                    "url": "setting.html",
                    "title": "插件服务配置",
                    "size": "setting"
                };
                eModal.iframe(options);
            });
        })

    </script>
</head>

<body style="background:#f7f7f7">
<div id="load"></div>
<div id="contents">
    <div class="rows" id="plugin">
        <div class="page-header">
            <h3 style="border-left: 3px solid #1890ff;padding-left: 5px;margin-bottom: 30px;margin-top: 10px;">管理插件
                <small v-cloak>{{version}}</small>
                <button id="settings-btn" class="btn btn-outline-primary" style="float:right">
                    <i class="icon-cog bigger-150"></i>
                    设置
                </button>
            </h3>
        </div>
        <!-- /.page-header -->

        <div class="tabbable">
            <ul id="plugintab" class="nav nav-tabs padding-12 tab-color-blue background-blue">
                <li class="nav-item">
                    <a class="nav-link active" href="#all" data-toggle="tab">所有</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#used" data-toggle="tab">使用中</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#unused" data-toggle="tab">未使用</a>
                </li>
            </ul>

            <div class="tab-content">
                <div class="tab-pane active" id="all">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                            <tr>
                                <th class="hidden-480">名称</th>
                                <th>作者</th>
                                <th>简介</th>
                                <th>版本</th>
                                <th>查看</th>
                                <th>设置/启动|停止/卸载</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr v-for="plugin in plugins">
                                <td v-cloak>
                                    {{plugin.name}}
                                </td>
                                <td class="hidden-480" v-cloak>{{plugin.author}}</td>
                                <td v-cloak>{{plugin.desc }}</td>
                                <td v-cloak>{{plugin.version }}</td>
                                <td v-cloak>
                                    <div class="btn-group">
                                        <a :href="getViewHref(plugin.shortName)">
                                            <button class="btn btn-sm btn-light">
                                                <i class="icon-zoom-in bigger-120"></i>
                                            </button>
                                        </a>

                                    </div>
                                </td>
                                <td>
                                    <div class="btn-group">
                                        <a :href="getViewHref(plugin.shortName)">
                                            <button class="btn btn-sm btn-gray">
                                                <i class="icon-cogs bigger-120"></i>
                                            </button>
                                        </a>
                                        <a :href="getStartHref(plugin.shortName)">
                                            <button class="btn btn-sm btn-primary">
                                                <i class="icon-play bigger-120"></i>
                                            </button>
                                        </a>
                                        <a>
                                            <button class="btn btn-sm btn-danger stop"
                                                    v-on:click="stop(plugin.shortName)">
                                                <i class="icon-stop bigger-120"></i>
                                            </button>
                                        </a>
                                        <a>
                                            <button class="btn btn-sm btn-danger uninstall"
                                                    v-on:click="uninstall(plugin.shortName)">
                                                <i class="icon-trash bigger-120"></i>
                                            </button>
                                        </a>

                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="tab-pane" id="used">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                            <tr>
                                <th class="hidden-480">名称</th>
                                <th>作者</th>
                                <th>简介</th>
                                <th>版本</th>
                                <th>查看</th>
                                <th>停止/卸载</th>
                            </tr>
                            </thead>

                            <tbody>
                            <tr v-for="plugin in usedPlugins">
                                <td v-cloak>
                                    {{plugin.name}}
                                </td>
                                <td class="hidden-480" v-cloak>{{plugin.author }}</td>
                                <td v-cloak>{{plugin.desc }}</td>
                                <td v-cloak>{{plugin.version }}</td>
                                <td>
                                    <div class="btn-group">
                                        <a :href="getStartHref(plugin.shortName)">
                                            <button class="btn btn-sm btn-light">
                                                <i class="icon-zoom-in bigger-120"></i>
                                            </button>
                                        </a>

                                    </div>
                                </td>
                                <td>
                                    <div class="btn-group">
                                        <a>
                                            <button class="btn btn-sm btn-danger stop"
                                                    v-on:click="stop(plugin.shortName)">
                                                <i class="icon-stop bigger-120"></i>
                                            </button>
                                        </a>
                                        <a>
                                            <button class="btn btn-sm btn-danger uninstall"
                                                    v-on:click="uninstall(plugin.shortName)">
                                                <i class="icon-trash bigger-120"></i>
                                            </button>
                                        </a>

                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="tab-pane" id="unused">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                            <tr>
                                <th class="hidden-480">名称</th>
                                <th>作者</th>
                                <th>简介</th>
                                <th>版本</th>
                                <th>设置/启动/卸载</th>
                            </tr>
                            </thead>

                            <tbody>
                            <tr v-for="plugin in unusedPlugins">
                                <td v-cloak>
                                    {{plugin.name}}
                                </td>
                                <td v-cloak class="hidden-480">{{plugin.author}}</td>
                                <td v-cloak>{{plugin.desc}}</td>
                                <td v-cloak>{{plugin.version}}</td>

                                <td>
                                    <div class="btn-group">
                                        <a :href="getStartHref(plugin.shortName)">
                                            <button class="btn btn-sm btn-gray">
                                                <i class="icon-cogs bigger-120"></i>
                                            </button>
                                        </a>
                                        <a :href="getStartHref(plugin.shortName)">
                                            <button class="btn btn-sm btn-primary">
                                                <i class="icon-play bigger-120"></i>
                                            </button>
                                        </a>
                                        <a>
                                            <button class="btn btn-sm btn-danger uninstall"
                                                    v-on:click="uninstall(plugin.shortName)">
                                                <i class="icon-trash bigger-120"></i>
                                            </button>
                                        </a>

                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.table-responsive -->
        <a href="../center">
            <button class="btn btn-dark"><i class="icon-download"></i>下载</button>
        </a>
        <input id="gritter-light" checked="" type="checkbox" style="display:none"/>
    </div>
</div>
</body>
</html>